<%@ page errorPage="/WEB-INF/ErrorPage.jsp"%><%@ page import="java.util.*"%><%@ page import="com.aerogal.support.model.*"%><%@ include file="/WEB-INF/InitModel.jsp"%><%@ page import="java.text.DecimalFormat" %><html><script language="JavaScript" type="text/javascript">    function validarxx(frm){          var origen=frm.Origen.value;        var destino=frm.Destino.value;               if (origen=="")                {                    alert("origen es obligatorio" );                    return false;                }     if (destino=="")        {          alert("destino es obligatorio" );           return false;       }    if (origen.toUpperCase()==destino.toUpperCase())       {        alert("origen no puede ser igual a destino" );         return false;       }         return true;}   </script><SCRIPT language="JavaScript" type="text/javascript">    ahora       = new Date();    ahoraDay    = ahora.getDate();    ahoraMonth  = ahora.getMonth()+1;    ahoraYear   = ahora.getYear();   function suma(form){var total;var otros;total=0;otros=0;otros=eval(form.Tarifa.value)+eval(form.Q.value) + eval(form.Tasa.value)+       eval(form.Iva.value)+ eval(form.Seguro.value)-      eval(form.Comision.value)+       eval(form.Sc.value);total=eval(form.Penalidad.value)form.Otros.value=otros;form.Total.value=total;}  function envia(form ){   if (form.Dia.value>31)   {   alert("dia incorrecto");   return false;  }  else   return true;   }      function cuantosDias(mes, anyo)    {        var cuantosDias = 31;        if (mes == 4 || mes == 6 || mes == 9 || mes == 11)      cuantosDias = 30;        if (mes == 2 && (anyo/4) != Math.floor(anyo/4))      cuantosDias = 28;        if (mes == 2 && (anyo/4) == Math.floor(anyo/4))      cuantosDias = 29;        return cuantosDias;    }function validames(campo) {if (campo.value > 12) campo.value = 12;}function validadia(campo,mes, anyo) {var dias;dias=cuantosDias(mes,anyo);if (campo.value > dias)  campo.value = cuantosDias(mes,anyo);} </SCRIPT><%@ include file="/WEB-INF/Banner.jsp"%>  <table width="100%" align="center">    <% String error=model.getError();            if (error !=null)    {%>    <tr class="error">        <th  ><%=error%></th>    </tr>    <%}%></table><table width="100%" align="center"><form method="post" action="<%=CONTROLLER%>/Revisiones/Modificar"  name="RevisionManual" onSubmit="return validarxx(this)"><tr><td valign="top"><table width="100%" align="CENTER"><th>Revision Manual</th></table><%int contador=0;String Origen="";String Destino="";String Origen2="";String Destino2="";String Apellido="";String Nombre="";java.util.Date mifecha;long Boleto=0;long Boletoant=0;float  Tarifa=0;float Q=0;float Iva=0;float Tasa=0;float Seguro=0;float Comision=0;float Sc=0;float Penalidad=0;float Efectivo=0;float Tarjeta=0;float Cheque=0;float Otros=0;String Observacion="";int Dia=0;int Mes=0;int Anio=0;java.util.Calendar inicio = java.util.Calendar.getInstance();int oneway=1;long codigo1=0;float porcentajeiva=12;String vale=""; List lista = model.getBoletop();              if  (lista != null)  {                    Iterator itv = lista.iterator();                   while (itv.hasNext()) {                                                Boletom boletom=(Boletom) itv.next();                                                if (contador==0)                        {                        Origen=boletom.getOrigen().trim();                        Destino=boletom.getDestino().trim();                        }                        else                        {                        Origen2=boletom.getOrigen().trim();                        Destino2=boletom.getDestino().trim();                        }                        mifecha=boletom.getFecha();                        Apellido=boletom.getApellido();                        Nombre=boletom.getNombre();                        Boleto=boletom.getBoleto();                        Boletoant=boletom.getBoletoant();                        Tarifa=boletom.getTarifa();                        Q=boletom.getQ();                        Iva=boletom.getIva();                        Tasa=boletom.getTasa();                        Seguro=boletom.getSeguro();                        Comision=boletom.getComision();                        Sc=boletom.getSc();                        Penalidad=boletom.getPenalidad() ;                        Efectivo=boletom.getEfectivo() ;                        Tarjeta=boletom.getTarjeta();                        Cheque=boletom.getCheque();                        Otros=boletom.getOtros();                        Observacion=boletom.getObservacion();                        inicio.setTime(mifecha);                                                Mes =inicio.get(Calendar.MONTH)+1;                        Anio=inicio.get(Calendar.YEAR);                        Dia=inicio.get(Calendar.DATE);                        contador++;                        //codigo1=vuelo.getCodigo();                    }}%><table width="100%" align="CENTER"><%DecimalFormat f =new DecimalFormat("0.00");%><tr><td>Origen :</td><td><input name="Origen"  value="<%=Origen%>" type="text"   size="3" maxlength="10" onChange="javascript:this.value=this.value.toUpperCase();" READONLY></td><td>Destino :</td><td><input name="Destino" value="<%=Destino%>" type="text"  size="3" maxlength="10" onChange="javascript:this.value=this.value.toUpperCase();" READONLY></td></tr><tr><td>Origen :</td><td><input name="Origen2" value="<%=Origen2%>" type="text" size="3" maxlength="3" onChange="javascript:this.value=this.value.toUpperCase();" READONLY></td><td>Destino :</td><td><input name="Destino2" value="<%=Destino2%>" type="text" size="3" maxlength="3" onChange="javascript:this.value=this.value.toUpperCase();" READONLY></td></tr></table><table width="100%" align="CENTER"><tr><td>Fecha :</td><td>Dia</td><td><input name= "Dia"  value="<%=Dia%>" id="Dia" type="text"  size="2" maxlength="2"  onKeypress="if (event.keyCode < 45 || event.keyCode > 57) event.returnValue = false;" onKeyUp="validadia(this.form.Dia,this.form.Mes,this.form.Anio);"  READONLY></TD><td>Mes</td><td><input name= "Mes" value="<%=Mes%>"id="Mes" type="text"  size="2" maxlength="2" onKeypress="if (event.keyCode < 45 || event.keyCode > 57) event.returnValue = false;" onKeyUp="validames(this.form.Mes);" READONLY> </TD><td>Anio</td><td><input name= "Anio" value="<%=Anio%>"  id="Anio" type="text"  size="4" maxlength="4" onKeypress="if (event.keyCode < 45 || event.keyCode > 57) event.returnValue = false;"  READONLY></td></table>        <table width="100%" align="CENTER">                <td>Apellido :</td>                <td><input name="Apellido"  value="<%=Apellido%>" type="text" size="30" maxlength="30" onChange="javascript:this.value=this.value.toUpperCase();"></td>                <td>Nombre :</td>                <td><input name="Nombre"  value="<%=Nombre%>" type="text" size="30" maxlength="30" onChange="javascript:this.value=this.value.toUpperCase();"></td>            </tr>        <tr><td>Boleto :</td><td><input name="Boleto"   value="<%=Boleto%>" type="text" size="30" maxlength="30" READONLY></td><td>Boleto Anterior:</td><td><input name="Boletoant" value="<%=Boletoant%>" type="text" value=0  size="30" maxlength="30" READONLY></td></tr>    </Table><table width="100%" align="CENTER">    <tr><td>Tarifa :</td><td><input name="Tarifa" value="<%=Tarifa%>" type="text"   size="10" maxlength="30" onKeypress="if (event.keyCode < 45 || event.keyCode > 57) event.returnValue = false;" ONBLUR ="suma(this.form);">  <td></tr><tr><td>Q :</td><td><input name="Q" value="<%=Q%>" type="text" value=0 size="10" maxlength="30" onKeypress="if (event.keyCode < 45 || event.keyCode > 57) event.returnValue = false;" ONBLUR ="suma(this.form);">  <td></tr><tr><td>Iva :</td><td><input name="Iva" value="<%=Iva%>" type="text"  size="10" maxlength="30" onKeypress="if (event.keyCode < 45 || event.keyCode > 57) event.returnValue = false;" ONBLUR ="suma(this.form);"><td></tr><tr><td>Tasa :</td><td><input name="Tasa" value="<%=Tasa%>"type="text"   size="10" maxlength="30" onKeypress="if (event.keyCode < 45 || event.keyCode > 57) event.returnValue = false;" ONBLUR ="suma(this.form);"><td></tr><tr><td>Seguro :</td><td><input name="Seguro" value="<%=Seguro%>"  type="text"  size="10" maxlength="30" onKeypress="if (event.keyCode < 45 || event.keyCode > 57) event.returnValue = false;" ONBLUR ="suma(this.form);"><td></tr><tr><td>Comision :</td><td><input name="Comision" value="<%=Comision%>"  type="text"  size="10" maxlength="30" onKeypress="if (event.keyCode < 45 || event.keyCode > 57) event.returnValue = false;" ONBLUR ="suma(this.form);"><select name="agencia" ><option value="-1">->Seleccione un Cliente<-</option><%List listacli = model.getClientes(); if (listacli != null) {      Iterator itcli = listacli.iterator();      while (itcli.hasNext())      {          Clientes cliente=(Clientes) itcli.next();                              %>        <option value='<%=cliente.getCodigo()%>'><%=cliente.getNombre().trim()%></option>          <%                } }%> </select></td></tr><tr><td>S.C. :</td><td><input name="Sc" value="<%=Sc%>" type="text"  size="10" maxlength="30" onKeypress="if (event.keyCode < 45 || event.keyCode > 57) event.returnValue = false;" ONBLUR ="suma(this.form);"><td></tr><tr><td>Penalidad :</td><td><input name="Penalidad" value="<%=Penalidad%>" type="text"  size="10" maxlength="30" onKeypress="if (event.keyCode < 45 || event.keyCode > 57) event.returnValue = false;" ONBLUR ="suma(this.form);"></td></tr><tr bgcolor="#CCCCCC"><td>Cash :</td><td><input name="Total" value="<%=Efectivo%>" type="text"  size="10" maxlength="30" onKeypress="if (event.keyCode < 45 || event.keyCode > 57) event.returnValue = false;" ></td></tr><tr bgcolor="#CCCCCC"><td>Tarjeta de Credito :</td><td><input name="Tc" value="<%=Tarjeta%>" type="text"  size="10" maxlength="30" onKeypress="if (event.keyCode < 45 || event.keyCode > 57) event.returnValue = false;" ></td></tr><tr bgcolor="#CCCCCC"><td>Cheque :</td><td><input name="Cheque" value="<%=Cheque%>" type="text"  size="10" maxlength="30" onKeypress="if (event.keyCode < 45 || event.keyCode > 57) event.returnValue = false;" ></td></tr><tr bgcolor="#CCCCCC"><td>Otros :</td><td><input name="Otros" value="<%=Otros%>" type="text"  size="10" maxlength="30" onKeypress="if (event.keyCode < 45 || event.keyCode > 57) event.returnValue = false;" ></td></tr> <tr><td>Observaciones :</td><td><input name="Observaciones" value="<%=Observacion%>" type="text" size="50" maxlength="100" ></td></tr></table></td></tr><tr><td align="right"><table width="10%" align="center"><tr><td> <input TYPE="submit"    NAME="Guardar" value="Guardar"> </td> <td> <input  type="submit"  NAME="Salir" value="Salir"> </td> </tr></table></td></tr></form></table><%@ include file="/WEB-INF/Banere.jsp"%></body></html>